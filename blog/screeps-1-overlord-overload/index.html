<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Screeps #1: Overlord overload | Ben Bartlett</title> <meta name="author" content="Ben Bartlett"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://bencbartlett.github.io/blog/screeps-1-overlord-overload/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Ben </span><span class="font-weight-bold">Bartlett</span></a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/math-animations/">Math Animations</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/software/">Software</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Screeps #1: Overlord overload</h1> <p class="post-meta">January 15, 2018</p> <p class="post-tags"> <a href="/blog/2018"> <i class="fas fa-calendar fa-sm"></i> 2018 </a>   ·   <a href="/blog/tag/screeps"> <i class="fas fa-hashtag fa-sm"></i> screeps</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>In <a href="https://bencbartlett.wordpress.com/2017/12/19/screeps-0-a-brief-history-of-game-time/" rel="external nofollow noopener" target="_blank">my last post</a> I mentioned I’d be rewriting my Screeps AI. And what a rewrite this has been. After 8547 additions and 9953 deletions over the last few commits, I’ve completely overhauled a huge amount of how my AI works. At first, there wasn’t any way to do this incrementally, the only strategy being “turn it off and see what breaks” and at times I felt like I was wading through the compiler errors like a fat mining creep wading through a swamp: <img src="/assets/img/screen-shot-2017-12-26-at-5-55-40-pm.png" alt="Screen Shot 2017-12-26 at 5.55.40 PM" class="img-fluid rounded z-depth-0"></p> <h1 id="my-shiny-new-ai">My shiny new AI</h1> <p>I’ve made a lot of changes to the organization of the Overmind framework and I’m super happy with how they’ve turned out. I think it’s getting very close to a 1.0 version which can be run as an opponent on private servers, and I almost decided to make this the 0.9 release, but I want to finish a few half-baked automation features first. I’ll discuss each of the major changes in more detail below, but first, here’s a fancy new diagram!</p> <p><img src="/assets/img/aidiagram.png" alt="AIdiagram.png" class="img-fluid rounded z-depth-0"></p> <p>If you’ve seen the <a href="https://github.com/bencbartlett/Overmind/blob/d6c399273d96b084718b065a027cf4a69e85a477/assets/AIdiagram.png" rel="external nofollow noopener" target="_blank">previous version of this diagram</a>, the first change you’ve probably noticed is that there are no more roles! Each <code class="language-plaintext highlighter-rouge">Role</code> used to govern the creep control logic for a certain type of creep. All creep control logic, including what used to be on <code class="language-plaintext highlighter-rouge">HiveCluster</code>s, and spawn request logic has been combined in the new <code class="language-plaintext highlighter-rouge">Overlord</code> class.</p> <p>Nerdy tangent: conceptually, the new <code class="language-plaintext highlighter-rouge">Overlord</code> class is actually the Overseer class I mentioned at the end of my last post, but I decided the name “Overlord” fit better thematically, since Overlords are responsible for relaying orders to the Zerg in Starcraft, which is what the class does. The remaining functionality of what used to be the colony Overlord is now the colony <code class="language-plaintext highlighter-rouge">Overseer</code>, which also thematically fits, since part of its function is to look for certain conditions in rooms and respond to them.</p> <h1 id="the-overmind-hierarchy">The Overmind hierarchy</h1> <p>Now let’s get in to how it all works. I’ll explain the main components of the AI in decreasing order of hierarchy, but first, a brief glossary:</p> <ul> <li> <strong><a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Overmind.ts" rel="external nofollow noopener" target="_blank">Overmind</a></strong>: the top-level object that contains and runs colonies and wraps all game objects</li> <li> <strong><a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Colony.ts" rel="external nofollow noopener" target="_blank">Colony</a></strong>: groups together rooms and their objects into a single unit and instantiates HiveClusters</li> <li> <strong><a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/hiveClusters/HiveCluster.ts" rel="external nofollow noopener" target="_blank">HiveCluster</a></strong>: groups together structures with related functionality and their logic</li> <li> <strong><a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/directives/Directive.ts" rel="external nofollow noopener" target="_blank">Directive</a></strong>: a wrapper for a flag with contextual behavior changes</li> <li> <strong><a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/overlords/Overlord.ts" rel="external nofollow noopener" target="_blank">Overlord</a></strong>: handles creep spawning and control for a specific goal; can be plopped on any of the above three objects</li> <li> <strong><a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Overseer.ts" rel="external nofollow noopener" target="_blank">Overseer</a></strong>: tracks directives and overlords as they are instantiated and runs them by priority; places new directives to respond to stimuli</li> <li> <strong><a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/tasks/Task.ts" rel="external nofollow noopener" target="_blank">Task</a></strong>: a customizable object which you can hand to a creep with <code class="language-plaintext highlighter-rouge">creep.task = Tasks.*</code>; generalizes the notion of “do action X to thing Y until condition Z is met”</li> <li> <strong><a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Zerg.ts" rel="external nofollow noopener" target="_blank">Zerg</a></strong>: task- and overlord-contextualized wrapper for a creep</li> </ul> <h2 id="level-0-overmind-and-the-tick-cycle">Level 0: Overmind and the tick cycle</h2> <p>I’ve simplified the structure of my <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/main.ts" rel="external nofollow noopener" target="_blank">main loop</a> considerably in this rewrite. Excluding memory checking and sandbox code, there are now three major phases in each tick, each of which is executed by a call to the <a href="https://github.com/bencbartlett/Overmind/blob/12ed8718608c51eccd998a22acad0ba486cdc385/src/Overmind.ts" rel="external nofollow noopener" target="_blank">Overmind</a>:</p> <ol> <li> <code class="language-plaintext highlighter-rouge">build()</code> All caching and object instantiation is done in this phase. <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Overmind.ts#L31" rel="external nofollow noopener" target="_blank">Colonies and their overlords are instantiated</a>, then <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Colony.ts#L149" rel="external nofollow noopener" target="_blank">colonies instantiate their hive clusters</a> and their overlords. Finally, <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Overmind.ts#L92" rel="external nofollow noopener" target="_blank">directives and their overlords are instantiated</a>. (More on overlords below.)</li> <li> <code class="language-plaintext highlighter-rouge">init()</code> This phase handles all pre-state-changing actions, primarily various requests like <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/overlords/Overlord.ts#L106" rel="external nofollow noopener" target="_blank">creep spawning requests</a> and <a href="https://github.com/bencbartlett/Overmind/tree/dfcc17146de408112c1186b1a552d2be6572751c/src/resourceRequests" rel="external nofollow noopener" target="_blank">transport and link requests</a>.</li> <li> <code class="language-plaintext highlighter-rouge">run()</code> This is where the action happens. All state-changing actions happen here; most will require information that is populated in the <code class="language-plaintext highlighter-rouge">init()</code> phase. HiveClusters will look through their various requests to determine what actions should be taken (<a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/hiveClusters/hiveCluster_hatchery.ts#L169" rel="external nofollow noopener" target="_blank">spawning the highest priority creep(s)</a> from the requests, <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/overlords/overlord_commandCenter.ts#L78" rel="external nofollow noopener" target="_blank">loading/unloading the storage link</a>, etc.). Overlords will scan through their Zerg and assign new tasks through a decision tree to each one that <code class="language-plaintext highlighter-rouge">[isIdle](https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Zerg.ts#L260)</code>, such as <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/overlords/overlord_mine.ts#L41" rel="external nofollow noopener" target="_blank">maintaining a miningSite</a>, <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/overlords/overlord_supply.ts#L38" rel="external nofollow noopener" target="_blank">determining which structures to supply</a>, or <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/overlords/overlord_haul.ts#L52" rel="external nofollow noopener" target="_blank">hauling back energy from a remote source</a>. The Overseer examines each room to look for any anomalous conditions, such as an <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Overseer.ts#L29" rel="external nofollow noopener" target="_blank">invasion</a> or a <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/Overseer.ts#L39" rel="external nofollow noopener" target="_blank">colony crash</a>, and responds by placing Directives accordingly.</li> </ol> <h2 id="level-1-colonies-hive-clusters-and-directives">Level 1: Colonies, Hive Clusters, and Directives</h2> <p>Not much has changed here; as before, the main idea behind colonies and hive clusters is to organize what belongs to what in a hierarchical manner based on what each object is instantiated by. Colonies are instantiated by an owned room and a list of outpost rooms (determined by directives) and organize these rooms into a single unit. HiveClusters are instantiated by a RoomObject belonging to a colony and group multiple structures and components together which share related functionality. Both Colonies and HiveClusters can have overlords put on them.</p> <p>Directives are on the same hierarchical level as HiveClusters, but they are a little different, since the colony does not directly instantiate them. They are instantiated from flags by the Overmind and assigned to a colony based on their location. Directives don’t have much internal logic (some will remove themselves, but that’s about as complex as it gets right now) but their main function is to be a conditional attachment point for overlords. Directives are categorized by color codes, with the primary color indicating a category and a secondary color indicating the specific type. I’ve currently only written a few of the most essential directives, but the categories I have in mind are:</p> <ul> <li>Purple: colony directives - territory (claiming/reserving rooms and grouping rooms in colonies) and colony operations (incubating lil’ babby colony)</li> <li>Red: military directives - defend against NPC invaders, attack a room, etc.</li> <li>Orange: operational directives - deal with non-standard colony conditions, like recovering from a crash with a bootstrapping directive</li> <li>Yellow: energy and resource directives</li> <li>White: RoomPlanner directives (more about this in the next post!), which allow for guided planning of colonized rooms, such as positioning hive clusters and placing road routing waypoints.</li> </ul> <h2 id="level-2-overlords-and-overseers">Level 2: Overlords and Overseers</h2> <p>Overlords are really the heart of this update, if you couldn’t tell by the title of this post. An Overlord is a generalization of a set of related things that need to be done in a colony like mining from a site, bootstrapping a new colony, guarding against invaders, or building construction sites. Overlords handle spawning or obtaining suitable creeps to do these things and contain the actual implementation of doing them, replacing the messy <code class="language-plaintext highlighter-rouge">Objective</code> system in the older AI. If HiveClusters are the organs of a colony, Overlords are the biological processes which make those organs function.</p> <p>One of the biggest (and hardest) design decisions I had to make with this rewrite was how to handle instantiation of Overlords. Initially, I was drawn toward using directives as the only instantiation method, such that every process in a colony would have its own flag. However, I decided against this idea for two reasons: (1) it seemed to be unnecessary and unintuitive to use directives for normal operation (HiveClusters would need to be changed to be instantiated from flags, which is against their design, or would have a split cluster-directive nature which I didn’t like) and (2) there is speculation that the flag cap may eventually be lowered from 10,000 to 100, so I don’t want to rely on flags too heavily.</p> <p>Eventually, I decided that an overlord can be instantiated from anything that has the following properties:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">name</code>: for generating unique Overlord references</li> <li> <code class="language-plaintext highlighter-rouge">room</code>: an Overlord handles operations which primarily take place in one room</li> <li> <code class="language-plaintext highlighter-rouge">pos</code>: Overlords must be instantiated from a physical object</li> <li> <code class="language-plaintext highlighter-rouge">colony</code>: for assigning which colony handles the spawn requests (I added a self-referencing <code class="language-plaintext highlighter-rouge">Colony.colony</code> property so that Colonies could instantiate Overlords as well)</li> <li> <code class="language-plaintext highlighter-rouge">memory</code>: Overlord memory is stored in <code class="language-plaintext highlighter-rouge">instantiator.memory.overlords[this.ref]</code> </li> </ul> <p>This allows Overlords to be instantiated from a Colony, HiveCluster, or Directive, which makes them a very versatile control model. Colony overlords are for constant, colony-wide operations, like handling workers to build new things. HiveCluster overlords are more specialized but still always present, like spawning miners for a site or a dedicated Hatchery attendant. Directive overlords tend to be conditional, like guarding against NPC invaders or claiming a new room.</p> <p>When an Overlord is instantiated with a specified priority, it automatically adds itself to a priority queue on the colony <code class="language-plaintext highlighter-rouge">Overseer</code>. The Overseer is responsible for running all Directives and Overlords, as well as placing new Directives to respond to various stimuli.</p> <h1 id="what-else-is-new">What else is new?</h1> <p>The changes I’ve discussed above are the largest changes that affect the core architecture of the AI, but I’ve added a ton of other improvements over the last month(s).</p> <h2 id="overlord-overload-interface-underload"> <code class="language-plaintext highlighter-rouge">Overlord</code> overload, <code class="language-plaintext highlighter-rouge">Interface</code> underload</h2> <p>If you’ve looked at my codebase before, you’ve probably noticed that almost every parent-level class was declared as <code class="language-plaintext highlighter-rouge">export class Foo implements IFoo</code>, where <code class="language-plaintext highlighter-rouge">IFoo</code> is an interface enumerating the public properties and methods of <code class="language-plaintext highlighter-rouge">Foo</code> declared in one of the <a href="https://github.com/bencbartlett/Overmind/tree/31b721ba01750e27ab74877908fcf96539c07721/src/declarations" rel="external nofollow noopener" target="_blank">declaration files</a>, a similar paradigm to header files in C. In many cases, this is unnecessary in TypeScript, since the compiler can directly infer the types of class instances from the class declaration itself.</p> <p>However, there was a method to my madness: because of the very hierarchical structure of my AI, I needed a top-level globally accessible object so that game objects could access “virtual” game objects with prototype extensions, such as:</p> <p><code class="language-plaintext highlighter-rouge">flag.colony --&gt; Overmind.Colonies[Overmind.colonyMap[flag.room.name]</code></p> <p>In order for the object to be globally declared, it must be declared in a declaration file. Since <a href="https://stackoverflow.com/questions/39040108/import-class-in-definition-file-d-ts" rel="external nofollow noopener" target="_blank">declaration files can’t contain top-level imports</a>, the objects must be either typed as <code class="language-plaintext highlighter-rouge">any</code>, which I didn’t like, or must have their properties enumerated by an interface.</p> <p>However, this got pretty tiring to maintain after a while, since every time I added or changed a method or property of a class, I’d need to keep updating the corresponding interface. With this update, I moved farther away from prototypes, deleting or moving a huge amount of prototypes I had in previous versions. The reduced use of prototypes allowed me to limit the number of top-level references, changing the typing of <code class="language-plaintext highlighter-rouge">global.Overmind</code> to <code class="language-plaintext highlighter-rouge">any</code>. (Any time this is referenced, the corresponding request is wrapped as a definitely-typed output; for example, many things reference <code class="language-plaintext highlighter-rouge">Directive.colony</code>, which references <code class="language-plaintext highlighter-rouge">Overmind.colony</code>.) Since removing most of the use of interfaces in my code, I’ve found development speed has increased noticeably.</p> <h2 id="a-whole-family-oftasks">A whole family of <code class="language-plaintext highlighter-rouge">Task</code>s!</h2> <p>I’ve cleaned up my Task code a little bit, but the biggest change is that tasks can now have parents! When a task is finished executing, it automatically sets <code class="language-plaintext highlighter-rouge">this.creep.task = this.parent</code> (which is <code class="language-plaintext highlighter-rouge">null</code> by default). This means you can call <code class="language-plaintext highlighter-rouge">task.fork()</code> to chain tasks together, which will come in handy for some of the logistics refactoring I’m planning in the future. For example, if you wanted to retrieve energy from two mining sites on a similar route and then drop off at storage, you could do:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">task</span> <span class="o">=</span> <span class="nx">Tasks</span><span class="p">.</span><span class="nf">withdraw</span><span class="p">(</span><span class="nx">miningSite1</span><span class="p">.</span><span class="nx">output</span><span class="p">);</span> 
<span class="nx">task</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">Tasks</span><span class="p">.</span><span class="nf">withdraw</span><span class="p">(</span><span class="nx">miningSite2</span><span class="p">.</span><span class="nx">output</span><span class="p">);</span> 
<span class="nx">task</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">Tasks</span><span class="p">.</span><span class="nf">deposit</span><span class="p">(</span><span class="nx">colony</span><span class="p">.</span><span class="nx">storage</span><span class="p">);</span> 
<span class="nx">creep</span><span class="p">.</span><span class="nx">task</span> <span class="o">=</span> <span class="nx">task</span><span class="p">;</span>
</code></pre></div></div> <p>Also, because I’m a little bit OCD about code aesthetics, I’ve added a new <code class="language-plaintext highlighter-rouge">Tasks</code> module to wrap task instances, changing the default task assignment paradigm from <code class="language-plaintext highlighter-rouge">creep.task = new TaskFoo(target)</code> to <code class="language-plaintext highlighter-rouge">creep.task = Tasks.foo(target)</code>.</p> <h2 id="a-better-feed-me-box">A better “feed me” box</h2> <p>If you look at my code for <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/overlords/overlord_haul.ts" rel="external nofollow noopener" target="_blank">haulers</a> and <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/overlords/overlord_supply.ts" rel="external nofollow noopener" target="_blank">suppliers</a>, you’ll notice that there’s very little logic for figuring out what structures to deposit to or withdraw from. Aside from bootstrapping after a crash, almost every resource-moving operation in the AI now uses <code class="language-plaintext highlighter-rouge">[TransportRequests](https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/resourceRequests/TransportRequestGroup.ts)</code> to get what they need. This was in previous versions of the AI, but I’ve added a lot of improvements and, with the removal of the objective system, generally use it more consistently throughout the code.</p> <h1 id="coming-soon-to-a-repository-near-you">Coming soon™ to a repository near you</h1> <p>I think that Overmind is (finally) nearing a workable release that could be run as an opponent on a private server. It’s not quite ready yet, so don’t expect much if you download it and leave it to its own devices, but it’s almost there. Here’s a few of the finishing touches it needs:</p> <ul> <li>I’ve been able to hammer away bugs a lot faster with the new AI framework, but there are still a few bugs I’m trying to fix (including one very annoying bug where creeps will very occasionally get stuck in an infinite loop of entering and exiting a room on exit tiles).</li> <li>The defense code is still pretty simplistic, and I haven’t yet implemented SK mining or (re-)implemented boosting and mineral processing, but I think the new framework will allow me to work pretty quickly toward these goals.</li> <li>I want to respawn to shard1 or shard2 and move the new code to the public server! I’m hoping I can do this in the next week or so to make the February leaderboards without having to start the month from a fresh spawn.</li> <li>For an AI to be run as a bot on a private server, it needs to be completely autonomous. I still have to implement reservation- and claiming-planning systems, but at a surface level <a href="https://xkcd.com/793/" rel="external nofollow noopener" target="_blank">this seems to be a relatively straightforward optimization problem</a>, so I’m hopeful this won’t be too much of an undertaking.</li> <li>I’ve been working on some automated <a href="https://github.com/bencbartlett/Overmind/blob/dfcc17146de408112c1186b1a552d2be6572751c/src/roomPlanner/RoomPlanner.ts" rel="external nofollow noopener" target="_blank">room planning features</a> which can be run in automatic or guided-manual modes. These features are basically finished as of the <a href="https://github.com/bencbartlett/Overmind/tree/dfcc17146de408112c1186b1a552d2be6572751c" rel="external nofollow noopener" target="_blank">latest commit</a>, but I’ve already been rambling for a long time and I think they’re cool enough to deserve their own post, so I’ll talk about them in the next one.</li> </ul> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Ben Bartlett. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>